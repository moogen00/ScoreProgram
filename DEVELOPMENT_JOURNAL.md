# 개발 히스토리 및 작업 일지 (Development Journal)

이 프로젝트를 진행하면서 나눈 주요 대화 내용과 해결한 문제들, 구현한 기능들을 상세하게 정리한 문서입니다.

---

## 1. 초기 환경 설정 및 디버깅 (Windows React Project)
**목표**: 윈도우 환경에서 React 프로젝트를 정상적으로 실행하고 디버깅 환경을 구축.
- **문제 상황**: 
  - `npm run dev` 실행 시 로딩이 느리거나 "Ready" 상태에서 멈추는 현상 발생.
  - 브라우저 연결 거부(ERR_CONNECTION_REFUSED) 및 디버거 부착 실패.
- **해결책**:
  - Vite의 HMR(Hot Module Replacement) 포트 설정 확인.
  - Windows 방화벽 설정 점검 및 `package.json` 스크립트 최적화.

## 2. 구글 로그인 인증 이슈 (Google Console)
**목표**: 관리자 및 심사위원 로그인을 위한 구글 OAuth 연동.
- **문제 상황**: 
  - 구글 로그인 시도 시 "GSI_LOGGER: The given origin is not allowed" 에러 발생.
  - 승인된 자바스크립트 원본(Origin) 설정 문제.
- **해결책**:
  - Google Cloud Console에서 `http://localhost:5173` 및 Firebase 배포 도메인을 승인된 리디렉션 URI에 추가.
  - 변경 사항 반영을 위한 대기 시간 고려 및 캐시 초기화.

## 3. 관리자 패널 기능 고도화
### 3-1. 참가자 정렬 (Participant Sorting)
- **요청**: 참가자 목록이 뒤죽박죽이라 관리가 어려움.
- **작업**: 참가자 번호(문자열 포함 숫자)를 기준으로 오름차순 정렬 로직 구현 (`localeCompare` 사용).

### 3-2. 화면 블랙 스크린 해결 (Refinements)
- **문제**: 관리자 패널 진입 시 간헐적으로 화면이 검게 변함.
- **원인**: React 컴포넌트(`Leaderboard.jsx`, `AdminPanel.jsx`)에서 `useCallback`, `useMemo` 등 Hook import 누락.
- **해결**: 누락된 의존성 추가 및 렌더링 최적화.

### 3-3. 전체 참가자 현황 탭
- **요청**: 종목별로 나뉜 참가자 외에, 연도별 전체 참가자를 한눈에 보고 싶음.
- **구현**: '전체 참가자 현황' 탭을 신설하여 연도 선택 시 모든 종목의 참가자를 통합 리스트로 보여주는 기능 구현.

## 4. 버그 수정 및 파일 처리 (Login & Export)
**목표**: 심사위원 로그인 오류 해결 및 데이터 백업 기능 정상화.
- **심사위원 로그인**:
  - **문제**: DB에 등록된 이메일임에도 "Unregistered User"라며 로그인 거부.
  - **원인**: 대소문자 불일치(Case Sensitivity). DB엔 `User@Gmail.com`인데 구글 로그인은 `user@gmail.com`을 반환.
  - **해결**: 로그인 및 데이터 비교 시 무조건 소문자로 변환(`toLowerCase()`)하여 처리하도록 로직 통일.
- **파일 다운로드**:
  - **문제**: JSON/Excel 백업 파일이 다운로드되지 않거나 파일명이 깨짐.
  - **해결**: Blob 객체 생성 및 `<a>` 태그 동적 생성 방식을 사용하여 명시적인 파일명으로 다운로드 트리거 구현.

## 5. 채점 로직 변경 (Manual Submission)
**목표**: 실수 방지를 위한 저장 방식 변경.
- **기존**: 점수 입력 시 즉시 자동 저장 (Auto-save).
- **변경**: "저장 및 제출(Save & Submit)" 버튼을 눌러야 서버에 전송되는 수동 방식으로 변경.
- **구현**:
  - 로컬 상태(`scores`)에만 임시 저장하다가 제출 버튼 클릭 시 Firestore에 일괄 업로드.
  - 제출 후 수정 버튼을 눌러야 다시 활성화되도록 잠금 기능 추가.

## 6. 데이터 안전장치 및 배포 (Safety & Deployment)
**목표**: 실수로 인한 데이터 삭제 방지 및 실서비스 배포.
- **삭제 경고 (Warnings)**:
  - 연도, 종목, 참가자 삭제 전 **"점수 데이터가 존재하는지"** 확인 로직 추가.
  - 점수가 있다면 "점수가 모두 삭제됩니다"라는 강력한 경고 표시.
- **심사위원 익명화 (Anonymization)**:
  - 심사위원 삭제 시 점수가 있으면 삭제 대신 이름을 **"알수 없음"**으로 변경.
  - 이를 통해 이미 채점된 점수와 평균값은 보존.
- **DB 초기화 보호**: 개발자용 초기화 버튼에 2중 확인창(Double Confirm) 적용.
- **배포**: Firebase Hosting을 통해 실제 웹 사이트 배포 완료.
- **협업**: 멀티 디바이스(Mac/Windows) 개발을 위한 GitHub 워크플로우 가이드 작성.
